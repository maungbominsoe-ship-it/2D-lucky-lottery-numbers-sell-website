<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Update Numbers</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #0a192f, #1a1a2e);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .admin-container {
            max-width: 600px;
            margin: 50px auto;
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #00d4ff;
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
        }
        
        h1 {
            color: #00d4ff;
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #00d4ff;
            font-weight: bold;
        }
        
        .key-inputs {
            display: flex;
            gap: 10px;
            align-items: center;
            justify-content: center;
        }
        
        input[type="number"] {
            width: 80px;
            height: 80px;
            text-align: center;
            font-size: 32px;
            font-weight: bold;
            background: rgba(0, 212, 255, 0.1);
            border: 2px solid #00d4ff;
            border-radius: 10px;
            color: white;
            outline: none;
        }
        
        input[type="number"]:focus {
            background: rgba(0, 212, 255, 0.2);
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.5);
        }
        
        .dot {
            font-size: 32px;
            color: #00d4ff;
            font-weight: bold;
        }
        
        .number-row-input {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .number-row-input input {
            width: 70px;
            height: 60px;
            font-size: 20px;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        button {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 150px;
        }
        
        .save-btn {
            background: #4CAF50;
            color: white;
        }
        
        .preview-btn {
            background: #2196F3;
            color: white;
        }
        
        .reset-btn {
            background: #ff9800;
            color: white;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .status-message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            display: none;
        }
        
        .success {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
            border: 1px solid #4CAF50;
            display: block;
        }
        
        .error {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
            border: 1px solid #f44336;
            display: block;
        }
        
        .instruction {
            background: rgba(255, 193, 7, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 30px;
            border: 1px solid rgba(255, 193, 7, 0.3);
            font-size: 14px;
        }
        
        .instruction h3 {
            color: #ffc107;
            margin-bottom: 10px;
        }
        
        @media (max-width: 600px) {
            input[type="number"] {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
            
            .number-row-input input {
                width: 50px;
                height: 50px;
                font-size: 16px;
            }
            
            button {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <h1>üîß Update 2D Numbers</h1>

                <!-- User Statistics Panel - Add to admin.html -->
        <div class="user-stats-panel" style="margin-top: 40px; padding: 25px; background: rgba(0, 212, 255, 0.1); border-radius: 15px; border: 1px solid rgba(0, 212, 255, 0.3);">
            <h3 style="color: #00d4ff; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-users"></i> User Statistics
            </h3>
            
            <div class="user-stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
                <div class="user-stat-card" style="background: rgba(255, 255, 255, 0.05); padding: 20px; border-radius: 10px; text-align: center;">
                    <div style="font-size: 32px; font-weight: bold; color: #00d4ff;" id="totalUsers">1</div>
                    <div style="color: #aaa; font-size: 14px;">Total Users</div>
                </div>
                
                <div class="user-stat-card" style="background: rgba(255, 255, 255, 0.05); padding: 20px; border-radius: 10px; text-align: center;">
                    <div style="font-size: 32px; font-weight: bold; color: #4CAF50;" id="activeUsers">1</div>
                    <div style="color: #aaa; font-size: 14px;">Active Today</div>
                </div>
                
                <div class="user-stat-card" style="background: rgba(255, 255, 255, 0.05); padding: 20px; border-radius: 10px; text-align: center;">
                    <div style="font-size: 32px; font-weight: bold; color: #ffc107;" id="totalPurchases">0</div>
                    <div style="color: #aaa; font-size: 14px;">Total Purchases</div>
                </div>
                
                <div class="user-stat-card" style="background: rgba(255, 255, 255, 0.05); padding: 20px; border-radius: 10px; text-align: center;">
                    <div style="font-size: 32px; font-weight: bold; color: #ff6b6b;" id="totalRevenue">0 Ks</div>
                    <div style="color: #aaa; font-size: 14px;">Total Revenue</div>
                </div>
            </div>
            
            <div class="user-actions" style="display: flex; gap: 15px; flex-wrap: wrap;">
                <button onclick="viewUserAnalytics()" style="padding: 10px 20px; background: #00d4ff; color: white; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                    <i class="fas fa-chart-bar"></i> View Analytics
                </button>
                
                <button onclick="exportAllUserData()" style="padding: 10px 20px; background: #4CAF50; color: white; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                    <i class="fas fa-download"></i> Export All Data
                </button>
                
                <button onclick="clearAllUserDataAdmin()" style="padding: 10px 20px; background: #f44336; color: white; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                    <i class="fas fa-trash"></i> Reset All Data
                </button>
            </div>
        </div>

        <script>
        // Load user statistics
        function loadUserStatistics() {
            // For now, we'll show sample data
            // In a real app, this would aggregate data from all users
            document.getElementById('totalUsers').textContent = '1';
            document.getElementById('activeUsers').textContent = '1';
            document.getElementById('totalPurchases').textContent = '0';
            document.getElementById('totalRevenue').textContent = '0 Ks';
        }

        // View user analytics
        function viewUserAnalytics() {
            alert('In a real implementation, this would show detailed user analytics.\n\nFor now, check the Analytics Dashboard for user statistics.');
        }

        // Export all user data
        function exportAllUserData() {
            // Collect all user data from localStorage
            const userData = {
                userProfile: localStorage.getItem('2dUserData'),
                purchaseHistory: localStorage.getItem('2dPurchaseHistory'),
                analytics: localStorage.getItem('2dAnalyticsData'),
                verifications: localStorage.getItem('paymentVerifications'),
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(userData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `2d-all-data-${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            alert('‚úÖ All website data exported!');
        }

        // Clear all user data (admin)
        function clearAllUserDataAdmin() {
            if (!confirm('‚ö†Ô∏è DANGER: This will delete ALL user data including purchases and analytics. This cannot be undone!')) {
                return;
            }
            
            if (!confirm('‚ö†Ô∏è ARE YOU ABSOLUTELY SURE? Type "DELETE" to confirm.')) {
                return;
            }
            
            const confirmation = prompt('Type "DELETE" to confirm:');
            if (confirmation !== 'DELETE') {
                alert('Cancelled. No data was deleted.');
                return;
            }
            
            // Clear all user-related data
            localStorage.removeItem('2dUserData');
            localStorage.removeItem('2dPurchaseHistory');
            localStorage.removeItem('2dUserSettings');
            localStorage.removeItem('paymentVerifications');
            
            alert('‚úÖ All user data has been deleted. Users will see fresh profiles on next visit.');
            
            // Reload statistics
            loadUserStatistics();
        }

        // Load statistics on page load
        document.addEventListener('DOMContentLoaded', loadUserStatistics);
        </script>

        <!-- Add this button in admin.html, maybe after the main heading -->
        <div style="text-align: center; margin-bottom: 30px;">
            <a href="analytics.html" class="analytics-link" 
            style="display: inline-block; padding: 12px 25px; background: linear-gradient(135deg, #ff6b6b, #ff8e53); 
                    color: white; border-radius: 10px; text-decoration: none; font-weight: bold;
                    transition: all 0.3s; border: none; cursor: pointer;">
                <i class="fas fa-chart-line"></i> View Analytics Dashboard
            </a>
        </div>

                <!-- Admin Notification Panel - Add to admin.html -->
        <div class="admin-notification-panel" style="margin-top: 40px; padding: 25px; background: rgba(255, 193, 7, 0.1); border-radius: 15px; border: 1px solid rgba(255, 193, 7, 0.3);">
            <h3 style="color: #ffc107; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-bell"></i> Send Notification to Users
            </h3>
            
            <div class="notification-form">
                <div class="form-group">
                    <label style="color: #ffc107; display: block; margin-bottom: 8px;">Notification Title</label>
                    <input type="text" id="adminNotificationTitle" placeholder="e.g., Important Update" 
                        style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid rgba(255, 193, 7, 0.3); background: rgba(0, 0, 0, 0.3); color: white;">
                </div>
                
                <div class="form-group" style="margin-top: 15px;">
                    <label style="color: #ffc107; display: block; margin-bottom: 8px;">Message</label>
                    <textarea id="adminNotificationMessage" rows="3" placeholder="Enter your message here..."
                            style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid rgba(255, 193, 7, 0.3); background: rgba(0, 0, 0, 0.3); color: white;"></textarea>
                </div>
                
                <div class="form-group" style="margin-top: 15px;">
                    <label style="color: #ffc107; display: block; margin-bottom: 8px;">Notification Type</label>
                    <select id="adminNotificationType" style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid rgba(255, 193, 7, 0.3); background: rgba(0, 0, 0, 0.3); color: white;">
                        <option value="update">Number Update</option>
                        <option value="alert">Important Alert</option>
                        <option value="system">System Message</option>
                    </select>
                </div>
                
                <button onclick="sendAdminNotification()" 
                        style="margin-top: 20px; width: 100%; padding: 15px; background: linear-gradient(135deg, #ffc107, #ff9800); color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                    <i class="fas fa-paper-plane"></i> Send Notification to All Users
                </button>
            </div>
            
            <div id="adminNotificationStatus" style="margin-top: 15px; padding: 10px; border-radius: 8px; display: none;"></div>
        </div>

        <script>
        // Send notification from admin
        function sendAdminNotification() {
            const title = document.getElementById('adminNotificationTitle').value;
            const message = document.getElementById('adminNotificationMessage').value;
            const type = document.getElementById('adminNotificationType').value;
            
            if (!title.trim() || !message.trim()) {
                alert('Please enter both title and message');
                return;
            }
            
            // Save notification to localStorage (users will see it when they visit)
            let adminNotifications = JSON.parse(localStorage.getItem('adminNotifications') || '[]');
            
            const notification = {
                id: Date.now().toString(),
                title: title,
                message: message,
                type: type,
                timestamp: new Date().toISOString(),
                from: 'admin'
            };
            
            adminNotifications.push(notification);
            localStorage.setItem('adminNotifications', JSON.stringify(adminNotifications));
            
            // Clear form
            document.getElementById('adminNotificationTitle').value = '';
            document.getElementById('adminNotificationMessage').value = '';
            
            // Show success
            const status = document.getElementById('adminNotificationStatus');
            status.textContent = '‚úÖ Notification sent! Users will see it on their next visit.';
            status.style.display = 'block';
            status.style.background = 'rgba(76, 175, 80, 0.2)';
            status.style.color = '#4CAF50';
            status.style.border = '1px solid #4CAF50';
            
            setTimeout(() => {
                status.style.display = 'none';
            }, 3000);
        }
        </script>
        
        <!-- Key Numbers -->
        <div class="form-group">
            <label>Key Numbers (0-9)</label>
            <div class="key-inputs">
                <input type="number" id="key1" min="0" max="9" value="0">
                <span class="dot">.</span>
                <input type="number" id="key2" min="0" max="9" value="0">
                <span class="dot">.</span>
                <input type="number" id="key3" min="0" max="9" value="0">
            </div>
        </div>
        
        <!-- Number Rows -->
        <div class="form-group">
            <label>Number Row 1 (00-99)</label>
            <div class="number-row-input">
                <input type="number" id="row1_1" min="0" max="99" value="12">
                <input type="number" id="row1_2" min="0" max="99" value="13">
                <input type="number" id="row1_3" min="0" max="99" value="14">
                <input type="number" id="row1_4" min="0" max="99" value="15">
                <input type="number" id="row1_5" min="0" max="99" value="16">
            </div>
        </div>
        
        <div class="form-group">
            <label>Number Row 2 (00-99)</label>
            <div class="number-row-input">
                <input type="number" id="row2_1" min="0" max="99" value="12">
                <input type="number" id="row2_2" min="0" max="99" value="13">
                <input type="number" id="row2_3" min="0" max="99" value="14">
                <input type="number" id="row2_4" min="0" max="99" value="15">
                <input type="number" id="row2_5" min="0" max="99" value="16">
            </div>
        </div>
        
        <div class="form-group">
            <label>Number Row 3 (00-99)</label>
            <div class="number-row-input">
                <input type="number" id="row3_1" min="0" max="99" value="12">
                <input type="number" id="row3_2" min="0" max="99" value="13">
                <input type="number" id="row3_3" min="0" max="99" value="14">
                <input type="number" id="row3_4" min="0" max="99" value="15">
                <input type="number" id="row3_5" min="0" max="99" value="16">
            </div>
        </div>
        
        <!-- Buttons -->
        <div class="button-group">
            <button class="save-btn" onclick="saveNumbers()">üíæ Save to Website</button>
            <button class="preview-btn" onclick="previewNumbers()">üëÅÔ∏è Preview</button>
            <button class="reset-btn" onclick="resetNumbers()">üîÑ Reset to Default</button>
        </div>
        
        <!-- Status Message -->
        <div id="statusMessage" class="status-message"></div>
        
        <!-- Instructions -->
        <div class="instruction">
            <h3>üìã How to Use:</h3>
            <p>1. Change numbers in the boxes above</p>
            <p>2. Click "Preview" to see changes</p>
            <p>3. Click "Save to Website" to update main website</p>
            <p>4. Numbers will automatically update on your main website</p>
            <p>5. Use this page twice daily to update numbers</p>
        </div>

                    <!-- Add this in admin.html before the closing </div> of .admin-container -->
            <div class="admin-verification-panel">
                <h2><i class="fas fa-check-circle"></i> Payment Verifications</h2>
                
                <div class="verification-stats">
                    <div class="stat-item">
                        <span class="stat-label">Pending:</span>
                        <span class="stat-value pending" id="pendingCount">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Approved:</span>
                        <span class="stat-value approved" id="approvedCount">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Rejected:</span>
                        <span class="stat-value rejected" id="rejectedCount">0</span>
                    </div>
                </div>
                
                <div class="verification-list" id="verificationList">
                    <!-- Verifications will be loaded here -->
                    <div class="no-verifications">No pending verifications</div>
                </div>
            </div>

                            <!-- Backup & Restore System -->
                <div class="backup-system" style="margin-top: 40px; padding: 25px; background: rgba(0, 212, 255, 0.1); border-radius: 15px; border: 2px solid #00d4ff;">
                    <h3 style="color: #00d4ff; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-database"></i> Backup & Restore System
                    </h3>
                    
                    <!-- Backup Stats -->
                    <div class="backup-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 25px;">
                        <div class="backup-stat-card" style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 32px; font-weight: bold; color: #00d4ff;" id="backupCount">0</div>
                            <div style="color: #aaa; font-size: 14px;">Backups Stored</div>
                        </div>
                        
                        <div class="backup-stat-card" style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 32px; font-weight: bold; color: #4CAF50;" id="lastBackupTime">Never</div>
                            <div style="color: #aaa; font-size: 14px;">Last Backup</div>
                        </div>
                        
                        <div class="backup-stat-card" style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 32px; font-weight: bold; color: #ffc107;" id="totalDataSize">0 KB</div>
                            <div style="color: #aaa; font-size: 14px;">Total Data Size</div>
                        </div>
                        
                        <div class="backup-stat-card" style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 32px; font-weight: bold; color: #ff6b6b;" id="autoBackupStatus">OFF</div>
                            <div style="color: #aaa; font-size: 14px;">Auto-Backup</div>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="backup-actions" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 25px;">
                        <button class="backup-action-btn primary" onclick="backupSystem.createBackup()" style="padding: 15px; background: linear-gradient(135deg, #00d4ff, #0099ff); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <i class="fas fa-save"></i> Create Backup
                        </button>
                        
                        <button class="backup-action-btn" onclick="document.getElementById('restoreFile').click()" style="padding: 15px; background: rgba(255, 255, 255, 0.1); border: 2px dashed #00d4ff; border-radius: 10px; color: #00d4ff; cursor: pointer; font-weight: bold; display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <i class="fas fa-upload"></i> Restore Backup
                        </button>
                        <input type="file" id="restoreFile" accept=".json" hidden onchange="backupSystem.restoreFromFile(event)">
                        
                        <button class="backup-action-btn" onclick="backupSystem.exportAllData()" style="padding: 15px; background: rgba(76, 175, 80, 0.2); border: 1px solid #4CAF50; border-radius: 10px; color: #4CAF50; cursor: pointer; font-weight: bold; display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <i class="fas fa-download"></i> Export All
                        </button>
                        
                        <button class="backup-action-btn" onclick="backupSystem.clearOldBackups()" style="padding: 15px; background: rgba(255, 107, 107, 0.2); border: 1px solid #ff6b6b; border-radius: 10px; color: #ff6b6b; cursor: pointer; font-weight: bold; display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <i class="fas fa-trash"></i> Clean Up
                        </button>
                    </div>
                    
                    <!-- Auto-Backup Settings -->
                    <div class="backup-settings" style="background: rgba(0, 0, 0, 0.3); padding: 20px; border-radius: 10px; margin-bottom: 25px;">
                        <h4 style="color: #00d4ff; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-cog"></i> Auto-Backup Settings
                        </h4>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                            <div class="setting-item" style="display: flex; align-items: center; justify-content: space-between;">
                                <span style="color: white;">Enable Auto-Backup</span>
                                <label class="switch">
                                    <input type="checkbox" id="autoBackupToggle" onchange="backupSystem.toggleAutoBackup()">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            
                            <div class="setting-item" style="display: flex; align-items: center; justify-content: space-between;">
                                <span style="color: white;">Backup Frequency</span>
                                <select id="backupFrequency" onchange="backupSystem.updateBackupFrequency()" style="padding: 8px; border-radius: 5px; background: rgba(255, 255, 255, 0.1); color: white; border: 1px solid #00d4ff;">
                                    <option value="daily">Daily</option>
                                    <option value="weekly">Weekly</option>
                                    <option value="monthly">Monthly</option>
                                </select>
                            </div>
                            
                            <div class="setting-item" style="display: flex; align-items: center; justify-content: space-between;">
                                <span style="color: white;">Max Backups to Keep</span>
                                <input type="number" id="maxBackups" value="10" min="1" max="50" style="width: 70px; padding: 8px; border-radius: 5px; background: rgba(255, 255, 255, 0.1); color: white; border: 1px solid #00d4ff;">
                            </div>
                        </div>
                        
                        <div style="margin-top: 15px; display: flex; gap: 10px;">
                            <button onclick="backupSystem.forceAutoBackup()" style="padding: 10px 20px; background: #00d4ff; color: white; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-play"></i> Run Now
                            </button>
                            
                            <button onclick="backupSystem.backupToEmail()" style="padding: 10px 20px; background: #ff6b6b; color: white; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-envelope"></i> Email Backup
                            </button>
                        </div>
                    </div>
                    
                    <!-- Backup History -->
                    <div class="backup-history" style="background: rgba(0, 0, 0, 0.3); padding: 20px; border-radius: 10px;">
                        <h4 style="color: #00d4ff; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-history"></i> Backup History
                        </h4>
                        
                        <div class="backup-list" id="backupList" style="max-height: 300px; overflow-y: auto; padding-right: 10px;">
                            <!-- Backups will appear here -->
                            <div style="text-align: center; padding: 40px; color: #aaa;">
                                <i class="fas fa-database" style="font-size: 48px; margin-bottom: 15px; opacity: 0.5;"></i>
                                <p>No backups yet</p>
                                <p style="font-size: 14px; color: #777;">Create your first backup to protect your data</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Emergency Recovery -->
                    <div class="emergency-recovery" style="margin-top: 25px; padding: 20px; background: rgba(255, 107, 107, 0.1); border-radius: 10px; border: 1px solid rgba(255, 107, 107, 0.3);">
                        <h4 style="color: #ff6b6b; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-exclamation-triangle"></i> Emergency Recovery
                        </h4>
                        
                        <p style="color: rgba(255, 255, 255, 0.9); margin-bottom: 15px; line-height: 1.6;">
                            Use these tools only in case of data loss or corruption. This will overwrite current data.
                        </p>
                        
                        <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                            <button onclick="backupSystem.restoreLatestBackup()" style="padding: 12px 20px; background: #ffc107; color: #333; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-undo"></i> Restore Latest
                            </button>
                            
                            <button onclick="backupSystem.resetAllData()" style="padding: 12px 20px; background: #f44336; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-bomb"></i> Reset All Data
                            </button>
                            
                            <button onclick="backupSystem.exportForMigration()" style="padding: 12px 20px; background: #9c27b0; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; display: flex; align-items: center; gap: 8px;">
                                <i class="fas fa-server"></i> Migration Export
                            </button>
                        </div>
                    </div>
                    
                    <!-- Backup Status -->
                    <div id="backupStatus" style="margin-top: 20px; padding: 15px; border-radius: 10px; display: none;"></div>
                </div>

                <!-- Load Backup System -->
                <script src="backup.js"></script>
                <script>
                    // Initialize backup system
                    let backupSystem;
                    
                    document.addEventListener('DOMContentLoaded', function() {
                        backupSystem = new BackupSystem();
                    });
                </script>

            <!-- Add this CSS to admin.html's style section -->
            <style>
                /* Admin Verification Panel Styles */
                .admin-verification-panel {
                    background: rgba(10, 25, 47, 0.9);
                    padding: 30px;
                    border-radius: 15px;
                    border: 2px solid #00d4ff;
                    margin-top: 40px;
                }
                
                .admin-verification-panel h2 {
                    color: #00d4ff;
                    text-align: center;
                    margin-bottom: 20px;
                    font-size: 24px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 10px;
                }
                
                .verification-stats {
                    display: flex;
                    justify-content: space-around;
                    margin-bottom: 20px;
                    padding: 15px;
                    background: rgba(0, 0, 0, 0.3);
                    border-radius: 10px;
                }
                
                .stat-item {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                }
                
                .stat-label {
                    font-size: 14px;
                    color: #aaa;
                    margin-bottom: 5px;
                }
                
                .stat-value {
                    font-size: 24px;
                    font-weight: bold;
                }
                
                .stat-value.pending {
                    color: #ffc107;
                }
                
                .stat-value.approved {
                    color: #4CAF50;
                }
                
                .stat-value.rejected {
                    color: #f44336;
                }
                
                .verification-list {
                    max-height: 400px;
                    overflow-y: auto;
                    margin-top: 20px;
                }
                
                .verification-item {
                    background: rgba(255, 255, 255, 0.05);
                    padding: 20px;
                    border-radius: 10px;
                    margin-bottom: 15px;
                    border: 1px solid rgba(255, 255, 255, 0.1);
                }
                
                .verification-item-header {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 15px;
                }
                
                .verification-id {
                    font-weight: bold;
                    color: #00d4ff;
                    font-size: 18px;
                }
                
                .verification-status-badge {
                    padding: 5px 15px;
                    border-radius: 20px;
                    font-size: 14px;
                    font-weight: bold;
                }
                
                .status-pending {
                    background: rgba(255, 193, 7, 0.2);
                    color: #ffc107;
                }
                
                .status-approved {
                    background: rgba(76, 175, 80, 0.2);
                    color: #4CAF50;
                }
                
                .status-rejected {
                    background: rgba(244, 67, 54, 0.2);
                    color: #f44336;
                }
                
                .verification-details {
                    display: grid;
                    grid-template-columns: repeat(2, 1fr);
                    gap: 15px;
                    margin-bottom: 15px;
                }
                
                .verification-image img {
                    max-width: 200px;
                    max-height: 150px;
                    border-radius: 10px;
                    border: 2px solid rgba(0, 212, 255, 0.3);
                }
                
                .verification-actions {
                    display: flex;
                    gap: 10px;
                    margin-top: 15px;
                }
                
                .approve-btn, .reject-btn {
                    padding: 10px 20px;
                    border: none;
                    border-radius: 8px;
                    cursor: pointer;
                    font-weight: bold;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    transition: all 0.3s;
                }
                
                .approve-btn {
                    background: #4CAF50;
                    color: white;
                }
                
                .reject-btn {
                    background: #f44336;
                    color: white;
                }
                
                .approve-btn:hover, .reject-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
                }
                
                .no-verifications {
                    text-align: center;
                    padding: 40px;
                    color: #aaa;
                    font-style: italic;
                }
            </style>

            <!-- Add this JavaScript to admin.html's script section -->
            <script>
                // Load verifications in admin panel
                function loadVerifications() {
                    const verifications = JSON.parse(localStorage.getItem('paymentVerifications') || '[]');
                    const listElement = document.getElementById('verificationList');
                    const pendingCount = document.getElementById('pendingCount');
                    const approvedCount = document.getElementById('approvedCount');
                    const rejectedCount = document.getElementById('rejectedCount');
                    
                    if (!listElement) return;
                    
                    // Update counts
                    if (pendingCount) {
                        pendingCount.textContent = verifications.filter(v => v.status === 'pending').length;
                    }
                    if (approvedCount) {
                        approvedCount.textContent = verifications.filter(v => v.status === 'approved').length;
                    }
                    if (rejectedCount) {
                        rejectedCount.textContent = verifications.filter(v => v.status === 'rejected').length;
                    }
                    
                    // Clear list
                    listElement.innerHTML = '';
                    
                    if (verifications.length === 0) {
                        listElement.innerHTML = '<div class="no-verifications">No verifications found</div>';
                        return;
                    }
                    
                    // Add each verification
                    verifications.forEach(verification => {
                        const item = document.createElement('div');
                        item.className = 'verification-item';
                        item.id = `verification-${verification.id}`;
                        
                        const statusClass = `status-${verification.status}`;
                        const statusText = verification.status.charAt(0).toUpperCase() + verification.status.slice(1);
                        
                        item.innerHTML = `
                            <div class="verification-item-header">
                                <div class="verification-id">#${verification.id.substr(-8)}</div>
                                <div class="verification-status-badge ${statusClass}">${statusText}</div>
                            </div>
                            
                            <div class="verification-details">
                                <div>
                                    <strong>Packages:</strong><br>
                                    ${verification.packages.map(p => p.name).join(', ')}
                                </div>
                                <div>
                                    <strong>Amount:</strong><br>
                                    ${verification.totalAmount.toLocaleString()} Ks
                                </div>
                                <div>
                                    <strong>Transaction ID:</strong><br>
                                    ${verification.transactionId}
                                </div>
                                <div>
                                    <strong>Payment Method:</strong><br>
                                    ${verification.paymentMethod}
                                </div>
                                <div>
                                    <strong>Submitted:</strong><br>
                                    ${new Date(verification.timestamp).toLocaleString()}
                                </div>
                            </div>
                            
                            ${verification.screenshotData ? `
                            <div class="verification-image">
                                <img src="${verification.screenshotData}" alt="Payment Screenshot">
                            </div>
                            ` : ''}
                            
                            ${verification.status === 'pending' ? `
                            <div class="verification-actions">
                                <button class="approve-btn" onclick="approveVerification('${verification.id}')">
                                    <i class="fas fa-check"></i> Approve
                                </button>
                                <button class="reject-btn" onclick="rejectVerification('${verification.id}')">
                                    <i class="fas fa-times"></i> Reject
                                </button>
                            </div>
                            ` : ''}
                            
                            ${verification.status === 'rejected' && verification.rejectionReason ? `
                            <div class="rejection-reason">
                                <strong>Rejection Reason:</strong> ${verification.rejectionReason}
                            </div>
                            ` : ''}
                        `;
                        
                        listElement.appendChild(item);
                    });
                }
                
                // Approve verification
                function approveVerification(id) {
                    if (confirm('Approve this payment? VIP numbers will be sent to user.')) {
                        updateVerificationStatus(id, 'approved');
                        alert('‚úÖ Payment approved! VIP numbers should be sent to user.');
                    }
                }
                
                // Reject verification
                function rejectVerification(id) {
                    const reason = prompt('Enter rejection reason:');
                    if (reason) {
                        updateVerificationStatus(id, 'rejected', reason);
                        alert('‚ùå Payment rejected. User will be notified.');
                    }
                }
                
                // Update verification status
                function updateVerificationStatus(id, status, reason = '') {
                    let verifications = JSON.parse(localStorage.getItem('paymentVerifications') || '[]');
                    const index = verifications.findIndex(v => v.id === id);
                    
                    if (index !== -1) {
                        verifications[index].status = status;
                        verifications[index].reviewedAt = new Date().toISOString();
                        if (reason) {
                            verifications[index].rejectionReason = reason;
                        }
                        
                        localStorage.setItem('paymentVerifications', JSON.stringify(verifications));
                        
                        // Update display
                        loadVerifications();
                        
                        // In a real system, send notification to user here
                        console.log(`Verification ${id} ${status}. Reason: ${reason}`);
                    }
                }
                
                // Load verifications on page load
                document.addEventListener('DOMContentLoaded', loadVerifications);
                
                // Auto-refresh every 30 seconds
                setInterval(loadVerifications, 30000);
            </script>

    </div>

    <script>
        // Load current numbers from localStorage
        function loadCurrentNumbers() {
            const saved = localStorage.getItem('2dNumbers');
            if (saved) {
                try {
                    const numbers = JSON.parse(saved);
                    
                    // Load key numbers
                    document.getElementById('key1').value = numbers.keys[0] || '0';
                    document.getElementById('key2').value = numbers.keys[1] || '0';
                    document.getElementById('key3').value = numbers.keys[2] || '0';
                    
                    // Load row numbers
                    for (let row = 1; row <= 3; row++) {
                        for (let col = 1; col <= 5; col++) {
                            const inputId = `row${row}_${col}`;
                            const input = document.getElementById(inputId);
                            if (input && numbers.rows[row-1]) {
                                input.value = numbers.rows[row-1][col-1] || '00';
                            }
                        }
                    }
                    
                    showStatus('Loaded saved numbers', 'success');
                } catch (e) {
                    console.error('Error loading numbers:', e);
                }
            }
        }
        
        // Save numbers to localStorage
        function saveNumbers() {
            const numbers = {
                keys: [
                    document.getElementById('key1').value,
                    document.getElementById('key2').value,
                    document.getElementById('key3').value
                ],
                rows: [
                    [
                        document.getElementById('row1_1').value,
                        document.getElementById('row1_2').value,
                        document.getElementById('row1_3').value,
                        document.getElementById('row1_4').value,
                        document.getElementById('row1_5').value
                    ],
                    [
                        document.getElementById('row2_1').value,
                        document.getElementById('row2_2').value,
                        document.getElementById('row2_3').value,
                        document.getElementById('row2_4').value,
                        document.getElementById('row2_5').value
                    ],
                    [
                        document.getElementById('row3_1').value,
                        document.getElementById('row3_2').value,
                        document.getElementById('row3_3').value,
                        document.getElementById('row3_4').value,
                        document.getElementById('row3_5').value
                    ]
                ]
            };
            
            // Save to localStorage
            localStorage.setItem('2dNumbers', JSON.stringify(numbers));
            
            // Update the main website immediately
            updateMainWebsite(numbers);
            
            showStatus('‚úÖ Numbers saved successfully! Website updated.', 'success');
        }
        
        // Update main website
        function updateMainWebsite(numbers) {
            // This function will be called by the main website
            // We'll trigger an event that the main website listens to
            const event = new CustomEvent('numbersUpdated', { detail: numbers });
            window.dispatchEvent(event);
            
            // Also save to a shared localStorage key that main website reads
            localStorage.setItem('2dCurrentNumbers', JSON.stringify(numbers));
        }
        
        // Preview numbers
        function previewNumbers() {
            const key1 = document.getElementById('key1').value.padStart(2, '0');
            const key2 = document.getElementById('key2').value.padStart(2, '0');
            const key3 = document.getElementById('key3').value.padStart(2, '0');
            
            let preview = `Key -- ${key1.slice(-1)}.${key2.slice(-1)}.${key3.slice(-1)}\n\n`;
            
            for (let row = 1; row <= 3; row++) {
                let rowText = '';
                for (let col = 1; col <= 5; col++) {
                    const inputId = `row${row}_${col}`;
                    const input = document.getElementById(inputId);
                    if (input) {
                        const num = input.value.padStart(2, '0');
                        rowText += num.slice(-2) + (col < 5 ? '.' : '');
                    }
                }
                preview += rowText + '\n';
            }
            
            alert('Preview:\n\n' + preview);
            showStatus('Preview generated', 'success');
        }
        
        // Reset to default numbers
        function resetNumbers() {
            if (confirm('Reset all numbers to default?')) {
                document.getElementById('key1').value = '0';
                document.getElementById('key2').value = '0';
                document.getElementById('key3').value = '0';
                
                const defaultNumbers = [12, 13, 14, 15, 16];
                for (let row = 1; row <= 3; row++) {
                    for (let col = 1; col <= 5; col++) {
                        const inputId = `row${row}_${col}`;
                        const input = document.getElementById(inputId);
                        if (input) {
                            input.value = defaultNumbers[col-1];
                        }
                    }
                }
                
                showStatus('Reset to default numbers', 'success');
            }
        }
        
        // Show status message
        function showStatus(message, type) {
            const statusElement = document.getElementById('statusMessage');
            statusElement.textContent = message;
            statusElement.className = `status-message ${type}`;
            
            // Auto hide after 3 seconds
            setTimeout(() => {
                statusElement.className = 'status-message';
                statusElement.style.display = 'none';
            }, 3000);
        }
        
        // Auto-save when inputs change (optional)
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('change', function() {
                // Auto-preview after 1 second of no typing
                clearTimeout(window.autoPreviewTimer);
                window.autoPreviewTimer = setTimeout(() => {
                    // Optional: auto-preview
                    // previewNumbers();
                }, 1000);
            });
        });
        
        // Load saved numbers on page load
        document.addEventListener('DOMContentLoaded', loadCurrentNumbers);
        
        // Add keyboard shortcut: Ctrl+S to save
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                saveNumbers();
            }
        });
    </script>
</body>
</html>